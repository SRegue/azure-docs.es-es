---
title: Administración de fuentes de distribución de datos en Metrics Advisor
titleSuffix: Azure Cognitive Services
description: Obtenga información sobre cómo administrar las fuentes de distribución de datos que ha agregado a Metrics Advisor.
services: cognitive-services
author: mrbullwinkle
manager: nitinme
ms.service: applied-ai-services
ms.subservice: metrics-advisor
ms.topic: conceptual
ms.date: 04/20/2021
ms.author: mbullwin
ms.openlocfilehash: dadefe25926b5a3e3c81cef21ff5d030692ccde4
ms.sourcegitcommit: 192444210a0bd040008ef01babd140b23a95541b
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 07/15/2021
ms.locfileid: "114342032"
---
# <a name="how-to-manage-your-data-feeds"></a>Procedimientos: Administración de las fuentes de distribución de datos

Obtenga información sobre cómo administrar las fuentes de distribución de datos incorporadas a Metrics Advisor. En este artículo se explica paso a paso cómo administrar fuentes de distribución de datos en Metrics Advisor.

## <a name="edit-a-data-feed"></a>Edición de una fuente de distribución de datos

> [!NOTE]
> Los detalles siguientes no se pueden cambiar una vez creada una fuente de distribución de datos. 
> * Identificador de la fuente de distribución de datos
> * Hora de creación
> * Dimensión
> * Tipo de origen
> * Granularidad

Solo el administrador de una fuente de distribución de datos puede realizar cambios en ella. 

En la página de lista de fuentes de distribución de datos, puede **pausar, reactivar y eliminar** una fuente de distribución de datos:

* **Pausar o reactivar**: seleccione el botón **Pause/Play** (Detener/Reproducir) para pausar o reactivar una fuente de distribución de datos.

* **Eliminar**: seleccione el botón **Delete** (Eliminar) para eliminar una fuente de distribución de datos.

Si cambia la hora de inicio de la ingesta, debe volver a comprobar el esquema. Para cambiarlo, haga clic en **Edit** (Editar) en la página de detalles de la fuente de distribución de datos.

##  <a name="backfill-your-data-feed"></a>Reposición de la fuente de distribución de datos

Seleccione el botón **Backfill** (Reposición) para desencadenar una ingesta inmediata en una marca de tiempo con el fin de corregir una ingesta errónea o invalidar los datos actuales.
- La hora de inicio es inclusiva.
- Y la hora de finalización es exclusiva.
- La detección de anomalías se vuelve a desencadenar solo en el intervalo seleccionado.

:::image type="content" source="../media/datafeeds/backfill-datafeed.png" alt-text="Reposición de la fuente de distribución de datos":::

## <a name="manage-permission-of-a-data-feed"></a>Administración de permisos de una fuente de distribución de datos

El acceso al área de trabajo se controla mediante el recurso de Metrics Advisor, que usa Azure Active Directory para la autenticación. Otra capa de control de permisos se aplica a los datos de métricas.

Metrics Advisor permite conceder permisos a distintos grupos de personas en fuentes de distribución de datos diferentes. Hay dos tipos de roles: 

- **Administrador**: tiene permisos completos para administrar una fuente de distribución de datos, lo que incluye modificarla y eliminarla.
- **Visor**: tiene acceso a una vista de solo lectura de la fuente de distribución de datos.
 

## <a name="advanced-settings"></a>Configuración avanzada

Hay varios valores de configuración avanzada opcionales al crear una fuente de distribución de datos, que se pueden modificar en la página de detalles de la fuente de distribución de datos.

### <a name="ingestion-options"></a>Opciones de ingesta

* **Ingestion time offset** (Desfase en el tiempo de ingesta): De forma predeterminada, los datos se ingieren según la granularidad especificada. Por ejemplo, una métrica con una marca de tiempo *daily* (diaria) se ingerirá un día después de su marca de tiempo. Puede usar el desfase para retrasar el tiempo de ingesta con un número *positivo*, o bien adelantarlo con un número *negativo*.

* **Max concurrency** (Simultaneidad máxima): Establezca este parámetro si el origen de datos admite la simultaneidad limitada. De lo contrario, deje el valor predeterminado.

* **Stop retry after** (Detener reintento después de): Si se ha producido un error en la ingesta de datos, se volverá a intentar automáticamente dentro de un intervalo de tiempo. El comienzo del período es la hora a la que se produjo la primera ingesta de datos. La duración del período se define según la granularidad. Si deja el valor predeterminado (-1), el valor se determinará en función de la granularidad que se indica a continuación.
    
    | Granularidad       | Stop Retry After (Detener reintento después)           |
    | :------------ | :--------------- |
    | Daily (Diario), Custom (>= 1 Day) (Personalizado [(>=1 día]), Weekly (Semanal), Monthly (Mensual) y Yearly (Anual)     | 7 días          |
    | Hourly (Cada hora) y Custom (>= 1 Day) (Personalizado [(>=1 día])       | 72 horas |

* **Min retry interval** (Intervalo de reintento mínimo): Puede especificar el intervalo mínimo al reintentar la extracción de datos del origen. Si deja el valor predeterminado (-1), el intervalo de reintento se determinará en función de la granularidad que se indica a continuación.
    
    | Granularidad       | Intervalo mínimo de reintento           |
    | :------------ | :--------------- |
    | Daily (Diario), Custom (>= 1 Day) (Personalizado [(>=1 día]), Weekly (Semanal) y Monthly (Mensual)     | 30 minutos          |
    | Hourly (Cada hora) y Custom (>= 1 Day) (Personalizado [(>=1 día])      | 10 minutos |
    | Anual | 1 día          |
 
### <a name="fill-gap-when-detecting"></a>Fill gap when detecting (Llenar los espacios al detectar): 

> [!NOTE]
> Este valor no afectará al origen de datos ni a los gráficos de datos que se muestran en el portal. El rellenado automático solo se produce durante la detección de anomalías.

Algunas veces las series no son continuas. Cuando falten puntos de datos, Metrics Advisor usará el valor especificado para rellenarlos antes de la detección de anomalías, con el fin de mejorar la precisión.
Las opciones son: 

* Usar el valor del punto de datos real anterior. Se utiliza de forma predeterminada.
* Usar un valor específico.

### <a name="action-link-template"></a>Plantilla de vínculo de acción. 

Las plantillas de vínculo de acción se usan para predefinir direcciones URL HTTP accionables, que constan de los marcadores de posición `%datafeed`, `%metric`, `%timestamp`, `%detect_config`y `%tagset`. Puede usar la plantilla para redirigir de una anomalía o un incidente a una dirección URL específica para explorarla en profundidad.

:::image type="content" source="../media/action-link-template.png" alt-text="Plantilla de vínculo de acción" lightbox="../media/action-link-template.png":::

Una vez que haya rellenado el vínculo de acción, haga clic en **Go to action link** (Ir al vínculo de acción) en la opción de acción de la lista de incidentes y en el menú contextual del árbol de diagnóstico. Reemplace los marcadores de posición de la plantilla de vínculo de acción con los valores correspondientes de la anomalía o el incidente.

| Marcador de posición | Ejemplos | Comentario |
| ---------- | -------- | ------- |
| `%datafeed` | - | Identificador de la fuente de distribución de datos |
| `%metric` | - | Identificador de la métrica |
| `%detect_config` | - | Identificador de la configuración de detección |
| `%timestamp` | - | Marca de tiempo de una anomalía o una hora de finalización de un incidente persistente |
| `%tagset` | `%tagset`, <br> `[%tagset.get("Dim1")]`, <br> `[ %tagset.get("Dim1", "filterVal")]` | Valores de dimensión de una anomalía o anomalía principal de un incidente.   <br> `filterVal` se utiliza para filtrar los valores coincidentes dentro de los corchetes.   |

Ejemplos:

* Si la plantilla del vínculo de acción es `https://action-link/metric/%metric?detectConfigId=%detect_config`:
  * El vínculo de acción `https://action-link/metric/1234?detectConfigId=2345` redirigiría a las anomalías o incidentes correspondientes a la métrica `1234` y la configuración de detección `2345`.

* Si la plantilla del vínculo de acción es `https://action-link?[Dim1=%tagset.get('Dim1','')&][Dim2=%tagset.get('Dim2','')]`:
    * El vínculo de acción sería `https://action-link?Dim1=Val1&Dim2=Val2` cuando la anomalía es `{ "Dim1": "Val1", "Dim2": "Val2" }`. 
    * El vínculo de acción sería `https://action-link?Dim2=Val2` cuando la anomalía es `{ "Dim1": "", "Dim2": "Val2" }`, ya que `[Dim1=***&]` se omite para la cadena vacía del valor de dimensión. 

* Si la plantilla del vínculo de acción es `https://action-link?filter=[Name/Dim1 eq '%tagset.get('Dim1','')' and ][Name/Dim2 eq '%tagset.get('Dim2','')']`: 
    * El vínculo de acción sería `https://action-link?filter=Name/Dim1 eq 'Val1' and Name/Dim2 eq 'Val2'` cuando la anomalía es `{ "Dim1": "Val1", "Dim2": "Val2" }`. 
    * El vínculo de acción sería `https://action-link?filter=Name/Dim2 eq 'Val2'` cuando la anomalía es `{ "Dim1": "", "Dim2": "Val2" }`, ya que `[Name/Dim1 eq '***' and ]` se omite para la cadena vacía del valor de dimensión. 
   
### <a name="data-feed-not-available-alert-settings"></a>Configuración de alertas de fuentes de distribución de datos no disponibles

Una fuente de distribución de datos se considera como no disponible si no se ingiere ningún dato del origen dentro del período de gracia especificado desde el momento en que se inicia la ingesta de la fuente de distribución de datos. En este caso, se desencadena una alerta.

Para configurar una alerta, debe [crear primero un enlace](alerts.md#create-a-hook). Las alertas se enviarán a través del enlace configurado.

* **Grace period** (Período de gracia): El valor Grace period (Período de gracia) se usa para determinar cuándo se debe enviar una alerta si no se ingieren puntos de datos. El punto de referencia es la hora de la primera ingesta. Si se produce un error en la ingesta, Metrics Advisor seguirá intentándolo en un intervalo normal especificado por la granularidad. Si sigue produciéndose un error después del período de gracia, se enviará una alerta.

* **Auto snooze** (Posponer automáticamente): Cuando esta opción se establece en cero, cada marca de tiempo con *Not Available* (No disponible) desencadenará una alerta. Si se especifica un valor distinto de cero, las marcas de tiempo continuas después de la primera marca de tiempo con *not available* (no disponible) no desencadenan alertas según la configuración especificada.

## <a name="next-steps"></a>Pasos siguientes
- [Configuración de métricas y ajuste de la configuración de la detección](configure-metrics.md)
- [Ajuste de la detección de anomalías mediante los comentarios](anomaly-feedback.md)
- [Diagnóstico de incidentes](diagnose-an-incident.md)
